function readURL(a){if(a.files&&a.files[0]){var e=new FileReader;e.onload=function(){var t=e.result;console.log("url : ",t),makeVideo(t)},console.log(a.files[0]);var t=a.files[0].name.split(".")[0]+".webm";document.getElementById("download").setAttribute("download",t),e.readAsDataURL(a.files[0])}}function returnHeightWidth(a,e){var t=a.width,r=a.height;console.log("The width of the image is "+t+"px."),console.log("The height of the image is "+r+"px.");var i=r>t;if(i){if(r>1280){var n=1280/r;t=Math.floor(n*t),r=1280}}else if(t>1280){var n=1280/t;r=Math.floor(r*n),t=1280}e(t,r)}function grabImageVideo(a,e){var t=new Image;t.onload=function(){returnHeightWidth(t,function(a,r){var i=document.getElementById("canvas");i.width=a,i.height=r;var n=i.getContext("2d");n.globalAlpha=1,n.drawImage(t,0,0,i.width,i.height),e(n,i.width,i.height)})},t.src=a}function grabFrame(a,e){grabImageVideo(a,function(a,t,r){var i=isChrome?whammy_:whammy_cross;if(isChrome)i.add(a,1e3),i.add(a,1e3),i.add(a,1e3);else{i.setFrameRate(framerate);var n=a.getImageData(0,0,t,r).data;i.addFrame(n,t,r),i.addFrame(n,t,r),i.addFrame(n,t,r)}e()})}function makeVideo(a){isChrome?whammy_=new Whammy.Video:(whammy_cross=new WhammyCrs,whammy_cross.reset(),whammy_cross.progress=function(a){console.log("progress : ",a)}),grabFrame(a,function(){isChrome?(console.log("can handle web p"),whammy_.compile(void 0,function(a){console.log("videoBlob : ",a);var e=window.URL.createObjectURL(a);document.getElementById("awesome").src=e,document.getElementById("download").style.display="",document.getElementById("donut").style.display="none",document.getElementById("download").href=e})):(console.warn("cannot handle web p"),whammy_cross.encodeWEBM(function(a){var e=window.URL.createObjectURL(a);document.getElementById("awesome").src=e,document.getElementById("download").style.display="",document.getElementById("donut").style.display="none",document.getElementById("download").href=e}))})}!function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=a}();var fbutton=document.getElementById("fbutton"),files=document.getElementById("filesinput");fbutton.addEventListener("click",function(){document.getElementById("filesinput").click()},!1),files.addEventListener("change",function(a){document.getElementById("awesome").src="",document.getElementById("download").style.display="none",document.getElementById("download").href="",filesarr=a.target.files,document.getElementById("donut").style.display="inline-block",readURL(a.target)},!1);var whammy_cross=null,whammy_=null,framerate=1,frames=[],webpUrlRegex=/^data:image\/webp;base64,/gi,isChrome=webpUrlRegex.test(document.createElement("canvas").toDataURL("image/webp"));