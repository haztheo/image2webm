function convertTowebp(e,t,r){console.warn("convertTowebp");var o=new Object;o.target_size=0,o.target_PSNR=0,o.method=3,o.sns_strength=50,o.filter_strength=20,o.filter_sharpness=0,o.filter_type=1,o.partitions=0,o.segments=4,o.pass=1,o.show_compressed=0,o.preprocessing=0,o.autofilter=0,o.extra_info_type=0,o.preset=0;var a={output:""},n=new WebPEncoder;n.WebPEncodeConfig(o),n.WebPEncodeRGBA(e,t,r,4*t,Number(100),a),console.log("webp generated");var c="data:image/webp;base64,"+base64.encode(a.output);return console.log("base64 gnerated"),c}!function(e){var t="object"==typeof exports&&exports,r="object"==typeof module&&module&&module.exports==t&&module,o="object"==typeof global&&global;o.global!==o&&o.window!==o||(e=o);var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var n=function(e){throw new a(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&n("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,o,a,s=e.length%3,i="",d=-1,l=e.length-s;++d<l;)t=e.charCodeAt(d)<<16,r=e.charCodeAt(++d)<<8,o=e.charCodeAt(++d),i+=c.charAt((a=t+r+o)>>18&63)+c.charAt(a>>12&63)+c.charAt(a>>6&63)+c.charAt(63&a);return 2==s?(t=e.charCodeAt(d)<<8,r=e.charCodeAt(++d),i+=c.charAt((a=t+r)>>10)+c.charAt(a>>4&63)+c.charAt(a<<2&63)+"="):1==s&&(a=e.charCodeAt(d),i+=c.charAt(a>>2)+c.charAt(a<<4&63)+"=="),i},decode:function(e){console.log("decode : ",e);var t=(e=String(e).replace(s,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&n("Invalid character: the string to be decoded is not correctly encoded.");for(var r,o,a=0,i="",d=-1;++d<t;)o=c.indexOf(e.charAt(d)),r=a%4?64*r+o:o,a++%4&&(i+=String.fromCharCode(255&r>>(-2*a&6)));return i},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return i});else if(t&&!t.nodeType)if(r)r.exports=i;else for(var d in i)i.hasOwnProperty(d)&&(t[d]=i[d]);else e.base64=i}(this);var wepimageurl=null;self.addEventListener("message",function(e){null==wepimageurl&&(wepimageurl=convertTowebp(e.data.imagedata,e.data.width,e.data.height));var t=e.data.repeatNumber;for(console.log("repeat number : ",e.data.repeatNumber),i=0;i<t;i++)self.postMessage({webp:wepimageurl,frame:e.data.frame+i})},!1);