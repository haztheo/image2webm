function convertTowebp(a,b,e){console.warn("convertTowebp");var d=new Object;d.target_size=0,d.target_PSNR=0,d.method=3,d.sns_strength=50,d.filter_strength=20,d.filter_sharpness=0,d.filter_type=1,d.partitions=0,d.segments=4,d.pass=1,d.show_compressed=0,d.preprocessing=0,d.autofilter=0,d.extra_info_type=0,d.preset=0;var f,c={output:""},i=new WebPEncoder;i.WebPEncodeConfig(d),f=i.WebPEncodeRGBA(a,b,e,4*b,Number(100),c),console.log("webp generated");var t="data:image/webp;base64,"+base64.encode(c.output);return console.log("base64 gnerated"),t}!function(a){var b="object"==typeof exports&&exports,e="object"==typeof module&&module&&module.exports==b&&module,d="object"==typeof global&&global;(d.global===d||d.window===d)&&(a=d);var c=function(a){this.message=a};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var i=function(a){throw new c(a)},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=/[\t\n\f\r ]/g,n=function(a){console.log("decode : ",a),a=String(a).replace(t,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9\/]/.test(a))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var d,c,e=0,n="",r=-1;++r<b;)c=f.indexOf(a.charAt(r)),d=e%4?64*d+c:c,e++%4&&(n+=String.fromCharCode(255&d>>(-2*e&6)));return n},r=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var c,t,n,o,b=a.length%3,e="",d=-1,h=a.length-b;++d<h;)c=a.charCodeAt(d)<<16,t=a.charCodeAt(++d)<<8,n=a.charCodeAt(++d),o=c+t+n,e+=f.charAt(o>>18&63)+f.charAt(o>>12&63)+f.charAt(o>>6&63)+f.charAt(63&o);return 2==b?(c=a.charCodeAt(d)<<8,t=a.charCodeAt(++d),o=c+t,e+=f.charAt(o>>10)+f.charAt(o>>4&63)+f.charAt(o<<2&63)+"="):1==b&&(o=a.charCodeAt(d),e+=f.charAt(o>>2)+f.charAt(o<<4&63)+"=="),e},o={encode:r,decode:n,version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return o});else if(b&&!b.nodeType)if(e)e.exports=o;else for(var h in o)o.hasOwnProperty(h)&&(b[h]=o[h]);else a.base64=o}(this);var wepimageurl=null;self.addEventListener("message",function(a){null==wepimageurl&&(wepimageurl=convertTowebp(a.data.imagedata,a.data.width,a.data.height));var b=a.data.repeatNumber;for(console.log("repeat number : ",a.data.repeatNumber),i=0;b>i;i++)self.postMessage({webp:wepimageurl,frame:a.data.frame+i})},!1);